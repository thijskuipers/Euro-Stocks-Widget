<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>EuroStocks</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Broes http://www.broes.nl">

	<link rel="stylesheet" href="EuroStocks.css">	
    <script src="libs/knockout-2.1.0.js"></script>

    <!-- <script src="EuroStocks.js" type="text/javascript" charset="utf-8"></script>
    <script src="/System/Library/WidgetResources/AppleClasses/AppleButton.js" type="text/javascript" charset="utf-8"></script>
    <script src="/System/Library/WidgetResources/AppleClasses/AppleInfoButton.js" type="text/javascript" charset="utf-8"></script>
    <script src="/System/Library/WidgetResources/AppleClasses/AppleAnimator.js" type="text/javascript" charset="utf-8"></script>
    <script src="BroesUpdater.js" type="text/javascript" charset="utf-8"></script>
    <script src="RisersFallersParser.js" type="text/javascript" charset="utf-8"></script>
    <script src="ChartParser.js" type="text/javascript" charset="utf-8"></script>
    <script src="RateParser.js" type="text/javascript" charset="utf-8"></script> -->
</head>
<body> <!-- onload="setup();"> -->
    <div id="front">
        <div id="topbar">
            <div id="topbartop"></div>
            <div id="topbarmiddle"></div>
            <div id="topbarbottom"></div>
            <div id="stockbars" data-bind="foreach: stocks">
                <div class="stockbar">
                    <div class="stockclick"></div>
                    <div class="stockname" data-bind="text: name"></div>
                    <div class="stockvalue" data-bind="text: value"></div>
                    <div class="stockchange" data-bind="text: change"></div>
                </div>
            </div>           
        </div>
        
        <div id="graphslideout"> <!-- onMouseOver="mouseOverGraph()" onMouseOut="mouseOutGraph()"> -->
            <div id="graphMessage">Message.</div>
            <div id="graphDiv">
                <div id="selectPeriodBar">
                    <div class="selectedPeriodLabel" id="selectPeriodLabel1">1d</div>
                    <div class="selectPeriodLabel" id="selectPeriodLabel2" onClick="selectPeriod(id)">1m</div>
                    <div class="selectPeriodLabel" id="selectPeriodLabel3" onClick="selectPeriod(id)">3m</div>
                    <div class="selectPeriodLabel" id="selectPeriodLabel4" onClick="selectPeriod(id)">6m</div>
                    <div class="selectPeriodLabel" id="selectPeriodLabel5" onClick="selectPeriod(id)">1y</div>
                    <div class="selectPeriodLabel" id="selectPeriodLabel6" onClick="selectPeriod(id)">2y</div>
                    <div class="selectPeriodLabel" id="selectPeriodLabel7" onClick="selectPeriod(id)">5y</div>
                </div>
                
                <div id="vertGrid">
                    <div class="vertGridLabel" id="vertGridLabel1"></div>
                    <div class="vertGridLabel" id="vertGridLabel2"></div>
                    <div class="vertGridLabel" id="vertGridLabel3"></div>
                    <div class="vertGridLabel" id="vertGridLabel4"></div>
                    <div class="vertGridLabel" id="vertGridLabel5"></div>
                </div>

                <div id="horGrid"></div>

                <canvas id="chartcanvas" width="189px" height="100px"></canvas>
                
            </div>
            
            <div id="switchRfGraph">
                <div id="switchRFSelect" onclick="switchShowRF()"></div>
                <div id="switchGraphSelect"></div>
            </div>
            
            
            <div id="rfTableDiv">
                <table id="risersFallersTable">
                    <colgroup class="risersColumn">
                        <col class="leftColumn"></col>
                        <col class="rightColumn"></col>
                    </colgroup>
                    <colgroup class="fallersColumn">
                        <col class="leftColumn"></col>
                        <col class="rightColumn"></col>
                    </colgroup>
                    <thead>
                        <tr>
                            <td colspan="2">Risers</td>
                            <td colspan="2">Fallers</td>
                        </tr>
                    </thead>
                    <tbody id="rfTableBody"></tbody>
                </table>
            </div>
        </div>
        
        <div id="iButton"></div>
    </div>
    
    <div id="back">
        <div class="top">
            <div class="a1" id="back_a1"></div>
            <div class="a2" id="back_a2"></div>
            <div class="a3" id="back_a3"></div>
        </div>
        <div class="middle">
            <div class="b1" id="back_b1"></div>
            <div class="b2" id="back_b2"></div>
            <div class="b3" id="back_b3"></div>
        </div>
        <div class="bottom">
            <div class="c1" id="back_c1"></div>
            <div class="c2" id="back_c2"></div>
            <div class="c3" id="back_c3"></div>
        </div>
        <div id="backContent">
            <input type="text" name="stockNameField" value="" id="stockNameField" title="Stock code should be of format ^FTSE for indices, AAPL for U.S. stocks and AABA.AS for European stocks. Go to the Yahoo! Finance site for the exact format.">
            <input type="submit" name="stockNameSubmit" value="Add!" id="stockNameSubmit" onclick="addNewStock()"><br>
            
            <select name="selectStock" id="selectStock" multiple="multiple" size="6" title="Select one or more stocks to remove, then click Remove!"></select>
            <input type="submit" name="removeStockSubmit" value="Remove" id="removeStockSubmit" onClick="removeExistingStock()">
            <input type="submit" name="moveStockUpSubmit" value="Move &#x2191;" id="moveStockUpSubmit" onClick="moveStockUp()"><br>
            <input type="submit" name="moveStockDownSubmit" value="Move &#x2193;" id="moveStockDownSubmit" onClick="moveStockDown()">
            <div id="updateInfo">
                <div id="updateText">Check for updates: </div>
                <input type="checkbox" name="updateCheckbox" id="updateCheckbox" checked="checked" onClick="updateCheckbox()"><br>
                <div id="updateFeedback"></div>
            </div>
        </div>
        <img class="urlLink" id="yahooURL"src="images/yahoofinancegrey.png" alt="Yahoo Finance" title="Go to Yahoo! Finance UK" onclick="openSite('http://uk.finance.yahoo.com')">
        <img class="urlLink" id="broesURL"src="images/broesurl.png" alt="Broes.nl" title="Go to Broes.nl" onclick="openSite('http://www.broes.nl')">
        <div id="doneButton"></div>
    </div>
    
    <div id="updatepanel">
        <div id="updatetext">
            <p>An update is available.</p>
            <p>Download now?</p>
        </div>
        <div id="btnUpdateNo"></div>
        <div id="btnUpdateYes"></div>
    </div>
    
    <script>
    // Create local scope
    (function () {
        function Stock(code, name, value, change) {
            var self = this,
                change = parseFloat(change);
            self.code = code;
            self.name = name;
            self.value = parseFloat(value);
            self.showChangeAsPercentage = ko.observable(false);
            self.change = ko.computed(function () {
                if(self.showChangeAsPercentage()) {
                    return (change / (self.value - change) * 100).toFixed(2) + "%";
                }
                else {
                    return change.toFixed(2);
                }
            });
        }
        
        function StocksViewModel() {
            var self = this;
            self.stocks = ko.observableArray([
                new Stock("AAPL", "AAPL", 678.22, 12.31),
                new Stock("GOOG", "GOOG", 75.25, 5),
                new Stock("^FTSE", "^FTSE", 5678.99, 30.99)
            ]);
        }
        
        var stocksViewModel = new StocksViewModel();
        
        ko.applyBindings(stocksViewModel);
        // debugger;
        
        setTimeout(function() {
            stocksViewModel.stocks.push(new Stock("TOM2.AS", "TOM2.AS", 3.44, 0.33));
        }, 1000);
    }());
    </script>
    
</body>
</html>
